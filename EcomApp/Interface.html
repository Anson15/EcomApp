<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <meta charset="utf-8" />
    <title></title>
</head>
<body>
    <div>
        <ul>
        </ul>
    </div>
    <div>
        <h1><u>Order Summary</u></h1>
        <br />
        <p><button class="clearall">Clear All</button></p>
        <table id="list">
        </table>
        <div class="mesg alert alert-success"></div>
    </div>
</body>
</html>

<script>
    let products = [
        {
            id: 1, productname: "Logitech Mouse", unitprice: 35
        }, {
            id: 2, productname: "Logitech Keyboard", unitprice: 75
        }, {
            id: 3, productname: "HP Mouse", unitprice: 75
        }, {
            id: 4, productname: "HP Keyboard", unitprice: 75
        }, {
            id: 5, productname: "Microsoft Mouse", unitprice: 75
        }, {
            id: 6, productname: "Microsoft Keyboard", unitprice: 75
        }];
    var num = 0;

    let cart = [];

    Object.keys(products).forEach(function (obj) {
        product = `<li>\<h2 class="Product">${products[num].productname}</h2>
                   <p class="price">RM ${products[num].unitprice.toFixed(2)}</p>
                   <p><button class="addcart" value=${products[obj].id}>Add to cart</button></p></li>`;
        $("ul").append(product);
        num++;
    })

    var quantity = 1;

    $(".addcart").click(function (btn) {
        var value = btn.target.value;

        var getProductDetails = products.find(item => item.id == value);

        //alert(getProductDetails.productname);

        productDetail = `<tr><td>${getProductDetails.productname} RM${getProductDetails.unitprice.toFixed(2)}
                         <p><button class="addQty" value="${getProductDetails.id}">+</button><p id="${getProductDetails.id}">1</p>
                         <button class="deductQty" value="${getProductDetails.id}">-</button></p>
                         <button class="delete" value="${getProductDetails.id}">X</button>
                         </td></tr>`
        $("table").append(productDetail);

        cart.push({ id: getProductDetails.id, productname: getProductDetails.productname, unitprice: getProductDetails.unitprice, quantity: 1 })


        $(".addQty").click(function (Qty) {

            if (getProductDetails.id == Qty.target.value) {
                debugger;

                var item = cart.find(prod => prod.id == Qty.target.value);

                item.quantity++;

                $(`${"#" + Qty.target.value}`).html(item.quantity);
            }
        })

        $(".deductQty").click(function (Qty) {

            if (getProductDetails.id == Qty.target.value) {

                debugger;

                var item = cart.find(prod => prod.id == Qty.target.value);

                item.quantity--;

                $(`${"#" + Qty.target.value}`).html(item.quantity);
            }
        })

        $(".delete").click(function () {
            $(this).parent().remove();
        })

        $(".clearall").click(function () {
            debugger;
            if ($("#list").children().length > 0) {
                $("#list").empty();
                $('.mesg').text("All items deleted.").fadeOut(2000);
            }
            else {
                 $('.mesg').text("No item to delete.").fadeOut(2000);
            }
            
        })

    })
</script>